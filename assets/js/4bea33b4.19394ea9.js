"use strict";(self.webpackChunkcosmos_hub_docs_site=self.webpackChunkcosmos_hub_docs_site||[]).push([[2019],{4020:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"modules/lsm-migration","title":"Cosmos SDK LSM","description":"Deprecation","source":"@site/docs/modules/lsm-migration.md","sourceDirName":"modules","slug":"/modules/lsm-migration","permalink":"/main/modules/lsm-migration","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Cosmos SDK LSM","order":3},"sidebar":"tutorialSidebar","previous":{"title":"x/liquid","permalink":"/main/modules/liquid"},"next":{"title":"Metaprotocol","permalink":"/main/modules/metaprotocols"}}');var o=n(2467),s=n(8453);const l={title:"Cosmos SDK LSM",order:3},a=void 0,d={},r=[{value:"Deprecation",id:"deprecation",level:2},{value:"Migration",id:"migration",level:2},{value:"Removals",id:"removals",level:3},{value:"Migrations",id:"migrations",level:3}];function c(e){const i={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.h2,{id:"deprecation",children:"Deprecation"}),"\n",(0,o.jsxs)(i.p,{children:["As of the ",(0,o.jsx)(i.code,{children:"v24.x"})," release of Gaia, the Cosmos SDK based Liquid Staking Module is deprecated. The ",(0,o.jsx)(i.code,{children:"v24"})," release line\nwill still have all the types from the forked SDK version, but all the API endpoints will be disabled."]}),"\n",(0,o.jsx)(i.h2,{id:"migration",children:"Migration"}),"\n",(0,o.jsx)(i.p,{children:"The following outlines the key differences between the Cosmos SDK LSM and the x/liquid module, including message and\nAPI removals between the two, as well as parameter and limit changes. In general an effort was made to keep as much\nas possible the same between the two. Cases where removals were made were largely due to no longer be able to\nproperly track state from outside the staking module."}),"\n",(0,o.jsx)(i.p,{children:"The state associated with each account currently on a live network which is using the SDK LSM will be migrated to\nuse the liquid module. There should be no change to the existing liquid staking denoms, tokenize share records, or\nrewards associated with any owner of a tokenize share record."}),"\n",(0,o.jsx)(i.h3,{id:"removals",children:"Removals"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"MsgUnbondValidator"}),"\n",(0,o.jsx)(i.li,{children:"MsgValidatorBond"}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["Both the message types and the APIs for Validator Bonds have been removed. The ",(0,o.jsx)(i.code,{children:"min_self_delegation"})," field in the\nSDK's staking module, which had previously been marked as deprecated, has been restored to its upstream state."]}),"\n",(0,o.jsxs)(i.p,{children:["Note that if you created a validator after the field was deprecated, you may end up with ",(0,o.jsx)(i.code,{children:"0"})," self delegation and a\n",(0,o.jsx)(i.code,{children:"min_self_delegation"})," of ",(0,o.jsx)(i.code,{children:"1"}),". This should be minimally invasive and will only affect you if you try to  call\n",(0,o.jsx)(i.code,{children:"EditValidator"})," or potentially in an ",(0,o.jsx)(i.code,{children:"Unjail"})," scenario. The resolution for this is to self delegate a minimal amount\nof stake."]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Limits changes"}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.code,{children:"GlobalLiquidStakingCap"})," and ",(0,o.jsx)(i.code,{children:"ValidatorLiquidStakingCap"})," are now the only protocol limits and are enforced\nsolely on tokenized shares through the x/liquid module itself. Previously this tracked delegations via ICA as\ncounting towards these limits, but the new tallies do not take that into account."]}),"\n",(0,o.jsxs)(i.p,{children:["Additionally, the ",(0,o.jsx)(i.code,{children:"liquid_shares"})," field of the ",(0,o.jsx)(i.code,{children:"Validator"})," object returned in staking module queries will no longer\nbe updated. Its removal is planned in v25, but as of v24 that value will still show up, but will not be updated and\nis not used in limits calculations. To query the same information, you can use the ",(0,o.jsx)(i.code,{children:"QueryLiquidValidator"})," request\nadded to the x/liquid module."]}),"\n",(0,o.jsx)(i.h3,{id:"migrations",children:"Migrations"}),"\n",(0,o.jsx)(i.p,{children:"All messages and APIs have been moved."}),"\n",(0,o.jsx)(i.p,{children:"For protobuf, the types within the distribution and staking modules have all been moved to"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-protobuf",children:"gaia.liquid.v1beta1.*\n"})}),"\n",(0,o.jsx)(i.p,{children:"For API paths, the module-specific paths have all been moved to"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"/gaia/liquid/v1beta1/\n"})}),"\n",(0,o.jsxs)(i.p,{children:["CLI interactions with the liquid module should use ",(0,o.jsx)(i.code,{children:"gaiad q liquid"})," or ",(0,o.jsx)(i.code,{children:"gaiad tx liquid"}),", etc."]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>l,x:()=>a});var t=n(6540);const o={},s=t.createContext(o);function l(e){const i=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(s.Provider,{value:i},e.children)}}}]);